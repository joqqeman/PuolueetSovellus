package sovellus;

import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Scanner;
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.chart.LineChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.stage.Stage;

public class PuolueetSovellus extends Application {
    
    
    
    @Override
    public void start(Stage ikkuna) {

    NumberAxis xAkseli = new NumberAxis(1968, 2008, 4);
    NumberAxis yAkseli = new NumberAxis();

    xAkseli.setLabel("Vuosi");
    yAkseli.setLabel("Suhteellinen kannatus");
    
    Scanner tiedostonLukija = new Scanner("puoluedata.tsv");
    
    Map<String, Map<Integer, Double>> arvot = new HashMap<>();
    
    LineChart<Number, Number> viivakaavio = new LineChart<>(xAkseli, yAkseli);
    viivakaavio.setTitle("Helsingin yliopisto, Shanghai-ranking");

    
    while (tiedostonLukija.hasNextLine()) {
    String rivi = tiedostonLukija.nextLine();
    String[] palat = rivi.split("\t");
    Map<Integer, Double> kannatus = new HashMap<>();
    String puolue = (palat[0]);
    Double vuosi68 = Double.valueOf(palat[1]);
    kannatus.put((Integer.valueOf(palat[1])), Double.valueOf(palat[1]));
    
    Double vuosi72 = Double.valueOf(palat[2]);
    kannatus.put((Integer.valueOf(palat[2])), Double.valueOf(palat[2]));    
    
    Double vuosi76 = Double.valueOf(palat[3]);
    kannatus.put((Integer.valueOf(palat[3])), Double.valueOf(palat[3]));    
    
    Double vuosi80 = Double.valueOf(palat[4]);
    kannatus.put((Integer.valueOf(palat[4])), Double.valueOf(palat[4]));    
    
    Double vuosi84 = Double.valueOf(palat[5]);
    kannatus.put((Integer.valueOf(palat[5])), Double.valueOf(palat[5]));    
    
    Double vuosi88 = Double.valueOf(palat[6]);
    kannatus.put((Integer.valueOf(palat[6])), Double.valueOf(palat[6]));    
    
    Double vuosi92 = Double.valueOf(palat[7]);
    kannatus.put((Integer.valueOf(palat[7])), Double.valueOf(palat[7]));    
    
    Double vuosi96 = Double.valueOf(palat[8]);
    kannatus.put((Integer.valueOf(palat[8])), Double.valueOf(palat[8]));    
    
    Double vuosi20 = Double.valueOf(palat[9]);
    kannatus.put((Integer.valueOf(palat[9])), Double.valueOf(palat[9]));    
    
    Double vuosi24 = Double.valueOf(palat[10]);
    kannatus.put((Integer.valueOf(palat[10])), Double.valueOf(palat[10]));    
    
    Double vuosi28 = Double.valueOf(palat[11]);
    kannatus.put((Integer.valueOf(palat[11])), Double.valueOf(palat[11]));    
    
    arvot.put(puolue, kannatus);
    }
    arvot.keySet().stream().forEach(puolue -> {
    XYChart.Series data = new XYChart.Series();
    data.setName(puolue);
    arvot.get(puolue).entrySet().stream().forEach(pari -> {
        data.getData().add(new XYChart.Data(pari.getKey(), pari.getValue()));
    });
    viivakaavio.getData().add(data);
    });

    //String rivi = "Puolue	1968	1972	1976	1980	1984	1988"
    //List<String> palat = Arrays.asList(rivi.split("\t"));
    //for (int i = 0; i < palat.size(); i++) {
    //System.out.println(i + ": " + palat.get(i));
    //}
   
   

    XYChart.Series sgData = new XYChart.Series();
    sgData.setName("SG");
    
    
    
    viivakaavio.getData().add(sgData);
    
    Scene nakyma = new Scene(viivakaavio, 1600, 1600);
    ikkuna.setScene(nakyma);
    ikkuna.show();
    
    
}

    public static void main(String[] args) {
        launch(PuolueetSovellus.class);
    }

}
